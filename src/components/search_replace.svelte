<script lang="ts">
	import ToggleButton from './toggle_button.svelte';

	export let query: string;
	export let caseSensitive: boolean;
	export let regex: boolean;

	export let replacement: string;
	export let preserveCase: boolean;

	export let onReplaceAllClick: () => void;
</script>

<div class="search-replace">
	<div class="text-input">
		<input type="text" placeholder="Search" bind:value={query} />

		<div class="actions">
			<ToggleButton bind:checked={caseSensitive}>Aa</ToggleButton>
			<ToggleButton bind:checked={regex}>.*</ToggleButton>
		</div>
	</div>

	<div class="text-input">
		<input type="text" placeholder="Replace" bind:value={replacement} />

		<div class="actions">
			<ToggleButton bind:checked={preserveCase}>AB</ToggleButton>
		</div>
	</div>

	<button on:click={onReplaceAllClick}>Replace All</button>
</div>

<style>
	.search-replace {
		display: flex;
		flex-direction: column;
		gap: 8px;
		padding: 8px;
	}

	.text-input {
		position: relative;
	}

	input {
		border: none;
		background: white;
		padding: 8px;
		width: 100%;
	}

	.actions {
		position: absolute;
		top: 0;
		right: 0;
		height: 100%;
		display: flex;
		align-items: center;
		gap: 5px;
		padding: 0 8px;
	}
</style>
